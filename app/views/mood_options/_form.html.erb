<%= form_with(url: polymorphic_path([@target, @mood_option]), local: true) do |f| %><!- ポリモーフィック関連 ->
  <!-- ステップ1: 感情選択 -->
  <div id="step1">
    <div class="mood_options">
      <div class="mood_option__title">
        どんな気持ち？
      </div>
      <div class="mood_option__sub">
        最大3つまで選べるよ
      </div>
      <% @mood_colors.each do |category, emotions| %>
        <%= category %>
      <div class="emotion-grid">
        <% emotions.each do |emotion, color| %>
          <div class="emotion-item">
            <label>
          <!-- チェックボックスで選択された色情報を送信 -->
            <%= f.check_box "mood_option[colors][]", { multiple: true }, color, nil %>
            <span class="color-box" style="background-color: <%= color %>; width: 20px; height: 20px; display: inline-block;"></span>
            <%= emotion %>
            </label>
          </div>
        <% end %>
      </div>
      <% end %>
    </div>
    <div class="mood_option_edit__btn">
      <button type="button" id="go-to-step2" class="btn_create">次へ</button>
    </div>
  </div>

  <!-- ステップ2: 何についての選択 -->
  <div id="step2" style="display: none;">
    <div class="mood_options">
      <div class="mood_option__title">
        何について？
      </div>
      <div class="mood_option__sub">
        最大3つまで選べるよ
      </div>
      <% @mood_labels.each do |category, labels| %>
        <%= category %>
      <div class="emotion-grid">
        <% labels.each do |label| %>
          <label>
            <%= f.check_box "mood_option[labels][]", { multiple: true }, label, nil %> <%= label %>
          </label>
        <% end %>
      </div>
      <% end %>
    </div>
    <div class="mood_option_edit__btn">
      <%= f.submit "登録する", class: "btn_create"%>
    </div>
  </div>
<% end %>
