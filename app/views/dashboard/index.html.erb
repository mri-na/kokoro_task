<div class="body__container">
  <div class ="journal_index">
    <div class="date-group">
      <div class='dashboard-btn'>
        <%= link_to '„Ç∏„É£„Éº„Éä„É´Êñ∞Ë¶è‰ΩúÊàê', new_journal_path, class: 'btn-primary' %>
        <%= link_to '„Çø„Çπ„ÇØÊñ∞Ë¶è‰ΩúÊàê', new_task_path, class: 'btn-primary' %>
        <%= link_to '„Ç¢„Ç´„Ç¶„É≥„ÉàÊÉÖÂ†±Á∑®ÈõÜ', edit_user_registration_path, class: 'btn-primary' %>
      </div>
    <% @grouped_entries.each do |date, entries| %>
        <div class="journal-date">
          <div class="journal-day"><%= date.strftime("%d") %></div> <!-- Êó• -->
          <div class=" journal-weekday"><%= date.strftime("%a") %></div> <!-- ÊõúÊó• -->
          <div class="journal-month-year"><%= date.strftime("%Y/%m") %></div> <!-- Âπ¥Êúà -->
        </div>
        <!-- „Çø„Çπ„ÇØ -->
          <% if entries[:tasks].any? %>
            <ul>
              <% entries[:tasks].each do |task| %>
                <div class="task-content">
                  <div style="display: flex; justify-content: space-between; align-items: center; width: 100%; border-radius: 8px;">
                    <div style="display: flex; align-items: center;">
                      <%= link_to "„Äê #{task.title} „Äë", task_path(task), class: "task-link", style: "flex-grow: 1; text-align: center; font-weight: bold; font-size: 1.1em;" %>
                      <% if task.completed? %>
                        <span style="background-color: #d4edda; color: #155724; padding: 2px 10px; border-radius: 12px; font-weight: bold; margin-left: 10px;">ÂÆå‰∫Üüéâ</span>
                      <% else %>
                        <span style="background-color: #f8d7da; color: #721c24; padding: 2px 10px; border-radius: 12px; font-weight: bold; margin-left: 10px;">Êú™ÂÆå‰∫Ü</span>
                      <% end %>
                    </div>
                    <% if task.completed? %>
                      <%= button_to 'Êú™ÂÆå‰∫Ü„Å´Êàª„Åô', complete_task_path(task, status: 'Êú™ÁùÄÊâã'), method: :patch, class: 'btn btn-outline-danger', style: "border-radius: 20px; padding: 5px 15px; font-weight: bold;" %>
                    <% else %>
                      <%= button_to 'ÂÆå‰∫Ü„Å´„Åô„Çã', complete_task_path(task, status: 'ÂÆå‰∫Ü'), method: :patch, class: 'btn btn-outline-success', style: "border-radius: 20px; padding: 5px 15px; font-weight: bold;" %>
                    <% end %>
                  </div>
                  <div class="task-description">
                    <%= link_to task.description, task_path(task), class: "task-link" %>
                  </div>
                  <%# mood_option = task.mood_option %> <!-- Èñ¢ÈÄ£‰ªò„Åë„Åï„Çå„ÅüMoodOption„ÇíÂèñÂæó -->
                  <%#= @mood_option.inspect %>
                  <!-- <div style="width: 20px; height: 20px; border-radius: 50%; background-color: <%#= mood_option&.average_color || '#ffffff' %>;"></div> -->
                </div>
              <% end %>
            </ul>
          <% else %>
            <p>„Çø„Çπ„ÇØ„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì</p>
          <% end %>
        <!-- „Ç∏„É£„Éº„Éä„É´ -->
          <% if entries[:journals].any? %>
            <ul>
              <% entries[:journals].each do |journal| %>
                <div class="journal-content">
                  <%= link_to journal.content, journal_path(journal), class: "journal-link" %>
                  <%# mood_option = journal.mood_option %> <!-- Èñ¢ÈÄ£‰ªò„Åë„Åï„Çå„ÅüMoodOption„ÇíÂèñÂæó -->
                  <!-- <div style="width: 20px; height: 20px; border-radius: 50%; background-color: <%#= mood_option&.average_color || '#ffffff' %>;"></div> -->
                </div>
              <% end %>
            </ul>
          <% else %>
            <!-- <p>„Ç∏„É£„Éº„Éä„É´„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì</p>
            <div class="today-info">
              <h3>‰ªäÊó•„ÅØ‰Ωï„ÅÆÊó•Ôºü</h3>
              <p><%= @today_info %></p>
            </div> -->
          <% end %>
    <% end %>
